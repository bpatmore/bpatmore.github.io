---
title: Analyzing Market Dynamics and Consumer Behavior in the Beer Industry 
subtitle: "Data-Driven Mastery: Unlocking Business Potential"
author: 
  - Brett Patmore

toc: true
toc-title: "Table of Contents"
toc-depth: 2
number-sections: true

fig-width: 9

execute:
  code-tools: true
  message: false
  warning: false

from: markdown+emoji
---
```{r setup}
#| include: false
library(tidyverse)
library(skimr)
library(ggthemes)
library(hrbrthemes)
library(dplyr)

theme_set(theme_ipsum()+
          theme(strip.background =element_rect(fill="lightgray"),
                axis.title.x = 
                  element_text(angle = 0,
                               size = rel(1.33),
                               margin = margin(10,0,0,0)),
                axis.title.y = 
                  element_text(angle = 0,
                               size = rel(1.33),
                               margin = margin(0,10,0,0))
                )
          )
```



# Beer Market Data
```{r}
beer_markets <- read_csv("https://bcdanl.github.io/data/beer_markets_all.csv")
```


```{r}
#| echo: false
#| eval: true
rmarkdown::paged_table(beer_markets)
```


<br>


## Variable Description

- 'hh': an identifier of the household
  
- 'X_purchase_desc': details on the purchased item
  
- 'quantity': the number of items purchased
  
- 'brand': Bud Light, Busch Light, Coors Light, Miller Lite, or Natural Light
  
- 'dollar_spent': total dollar value of purchase
  
- 'beer_floz': total volume of beer, in fluid ounces
  
- 'price_per_floz': price per fl.oz. (i.e., beer spent/beer floz)

- 'container': the type of container

- 'promo': Whether the item was promoted (coupon or otherwise)

- 'market': Scan-track market (or state if rural)

- 'state': US State

- demographic data, including gender, marital status, household income, class of work, race, education, age, the size of household, and whether or not the household has a microwave or dishwasher

<br>


# Introduction

## Background 
The beer industry is one of the largest sectors of the global beverage market. Beer is a staple for millions of people whether it be for a celebration, social gathering, of just everyday life. Like everything in the world, the beer market is constantly evolving due to trends in the market and consumer preference changes. One consumer preference in the beer market is light beer and almost every beer company makes their own light beer. The beer markets data includes data about Bud Light, Busch Light, Coors Light, Miller Lite, and Natural Light. I am going to analyze the beer markets data to find information about brand preferences, purchasing patterns, and beer consumption trends. This information is significant because it can provide insight into competitive challenges, market opportunities, and areas of innovation and growth for breweries and retailers. 

## Statement of the Problem
The overall goal of breweries and retailers that sell beer is to maximize profits. In order to do this, they need to understand factors that drive consumer behavior and influence their purchasing decisions. They also need to find their specific target market and cater their beer to meet the needs of this target market. Factors in the target market include income, employment, age, race, housing, and family dynamic. I am going to analyze the dynamics and consumer behavior in the beer markets data. In doing so, I will gain an understanding of beer consumption trends, brand preferences, and purchasing patterns. I will see what the target market for each brand is and also see information about their promotions to see how this effects purchasing patterns. The problem this will address is decision making for breweries and retailers. The insight provided from the analysis of this data will tell them about competitive challenges, market opportunities, potential changes, and areas of innovation or growth to help guide their decision making in order to maximize profits. 

<br><br>


# Exploratory Data Analysis

## Question 1

- What is the most popular beer brand purchased at each income level?
- Does income have an impact on which brand consumers purchase?

*Answer:* 
```{r}
beer_markets2 <- beer_markets %>%
  mutate(income_numeric = case_when(
    income == "under20k" ~ 20000,
    income == "20-60k" ~ 60000,
    income == "60-100k" ~ 100000,
    income == "100-200k" ~ 200000,
    income == "200k+" ~ 500000))
```


```{r}
beer_brand_purchases <- beer_markets2 |> 
  group_by(income, income_numeric, brand) |> 
  summarize(total_quantity = sum(quantity))

most_popular_brands_by_income <- beer_brand_purchases |> 
  group_by(income, income_numeric) |> 
  filter(total_quantity == max(total_quantity)) |> 
  select(income, income_numeric, brand, total_quantity)
  
brand_distribution <- beer_brand_purchases |> 
  group_by(income, income_numeric) |> 
  mutate(percentage = total_quantity / sum(total_quantity) * 100) |> 
  arrange(desc(income_numeric))

```
Bud Light is the most purchased brand at every income level besides the 60-100K level where Miller Lite is the most popular. Income does not appear to have an impact on which brand consumers purchase since Bud light is the most popular for the lowest and highest income level.

```{r}
ggplot(brand_distribution, aes(x = income_numeric, y = percentage, fill = brand)) +
  geom_bar(stat = "identity", position = "stack") +
  labs(x = "Income", y = "Percentage") +
  scale_x_continuous(
    breaks = unique(brand_distribution$income_numeric),
    labels = unique(brand_distribution$income)) +
  theme(axis.text.x = element_text(angle = 45, hjust = 1))
```
The most obvious trends visible from this is that as income increases, the percentage of Natural Light and Busch Light decrease. As Natural Light and Busch Light are decreasing, Miller Lite and Bud Light are both increasing in percentage as income increases. This indicated that Natural Light and Busch Light are more popular with lower income customers and Miller Lite and Bud Light are more popular with higher income customers. 


## Question 2

- Which income level buys the most beer? 

*Answer:*
```{r}
beer_quantity <- beer_markets2 |> 
  group_by(income, income_numeric) |> 
  summarise(total_quantity = sum(quantity, na.rm = TRUE)) |> 
  arrange(desc(total_quantity))

ggplot(beer_quantity, 
       aes(x = income_numeric, y = total_quantity)) +
  geom_point() +
  geom_line() +
  labs(x = "Income", y = "Total Quantity of Beer Bought") +
  scale_x_continuous(breaks = beer_quantity$income_numeric, labels = beer_quantity$income) +
    theme(axis.text.x = element_text(angle = 45, hjust = 1))
```
The income level that purchases the most beer is 20-60k at 46786. As income level increases, the quantity of beer purchased exponentially decreases as it goes all the way down to 812 for those making 200k+. People making under 20k were the second least with 8469 most likely due to their limited budget. 


## Question 3

- What percentage of purchases in each income level are made during a promotion?

*Answer:* 
```{r}
beer_promotion <- beer_markets2 |> 
  select(income, income_numeric, promo)

promo_percentage <- beer_promotion |> 
  group_by(income, income_numeric) |> 
  summarize(promo_percent = mean(promo) * 100)

ggplot(promo_percentage,
       aes(x = income_numeric, y = promo_percent)) +
  geom_point() +
  geom_line() +
  labs(x = "Income", y = "Percentage Purchased During Promotion") +
  scale_x_continuous(breaks = promo_percentage$income_numeric, labels = promo_percentage$income) +
    theme(axis.text.x = element_text(angle = 45, hjust = 1))
```
There is almost a direct correlation between income and percentage of purchases made during a promotion. The correlation is that as income increases, so does the percentage of purchases made during a promotion. This is true for all values other than a slight decrease from the 60-100k to the 100-200k income levels. This shows that people with a higher income are usually more likely ot respond to a promotion for beer. 


## Question 4

- What is the most popular beer brand in each state?
- Which states buy the most beer overall?
- Which state buys the most of each brand?

*Answer:* 
```{r}
brand_by_state <- beer_markets |> 
  group_by(state, brand) |> 
  summarize(total_quantity = sum(quantity))

most_popular_brand_by_state <- brand_by_state |> 
  group_by(state) |> 
  filter(total_quantity == max(total_quantity)) |> 
  select(state, brand, total_quantity) |> 
  arrange(desc(total_quantity))

top_states_for_each_brand <- brand_by_state |> 
  group_by(brand) |> 
  arrange(desc(total_quantity)) |> 
  group_by(brand) |> 
  slice_head(n = 2)

beer_quantity_by_state <- beer_markets |> 
  group_by(state) |> 
  summarize(total_quantity = sum(quantity)) |> 
  arrange(desc(total_quantity))

most_popular_state_for_brand <- brand_by_state |> 
  group_by(brand) |> 
  filter(total_quantity == max(total_quantity))
```

```{r}
ggplot(beer_quantity_by_state, aes(x = state, y = total_quantity)) +
  geom_bar(stat = "identity", width = 0.7) +
  labs(title = "Total Quantity of Beers Purchased by State",
       x = "State",
       y = "Total Quantity") +
  theme_minimal() +
  theme(axis.text.x = element_text(angle = 90, hjust = 1))
```
This data can help the brands determine where they need to distribute the most stock and which state they should target the most. For example, Florida and Texas have by far more beer sales than the rest of the states, so they will require a larger stock.

```{r}
ggplot(top_states_for_each_brand, aes(x = brand, y = total_quantity, fill = state)) +
  geom_bar(stat = "identity", position = "dodge") +
  labs(title = "Top States for Each Brand",
       x = "Brand",
       y = "Total Quantity",
       fill = "State") +
  theme_minimal() +
  theme(axis.text.x = element_text(angle = 45, hjust = 1))
```
Natural Light in Florida is the highest total quantity out of all beers in every state. This will help retailers in Florida know that they need to order a lot of Natural Light to always keep it in stock since there is such high demand. California shows up only one time and it is for Coors Light so that will help retailers in California know they need to order a good amount of Coors Light. Overall every brand is going to need to send a large quantity of their beer to Texas because that is the state with either the most or second most purchased of each brand. 


<br><br>


# Significance of the Project

## Explain its implications for real-world applications, business strategies, or public policy. 


<br><br>


# References

## List all sources cited in the project. 
